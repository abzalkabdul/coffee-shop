{% extends 'base.html' %}
{% load static %}

{% block menu_menu_content %}

{% if user.is_authenticated %}
    <link rel="stylesheet" href="{% static 'menu/cart.css' %}?v=9">

    <h1 style="margin: 80px 0 0 230px; font-size: 60px;">Cart</h1>

    <div class="item-containers">
        {% for item in cart_items %}
            <div class="item-container">
                <img src="{{ item.content_object.image.url }}" width="100">
                <p>{{ item.content_object.name }}</p>
                <div class="quantity-wrapper">
                    <button class="minus-btn">-</button>
                    <span class="quantity-number">{{ item.content_object.quantity }}</span>
                    <button class="plus-btn">+</button>
                </div>
                <button class="delete-btn">Delete</button>
            </div>
        {% endfor %}
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const itemContainers = document.querySelectorAll('.item-container');

            itemContainers.forEach(container => {
                const minusBtn = container.querySelector('.minus-btn');
                const plusBtn = container.querySelector('.plus-btn');
                const quantitySpan = container.querySelector('.quantity-number');

                minusBtn.addEventListener('click', () => {
                    let current = parseInt(quantitySpan.textContent);
                    if (current > 1) {
                        quantitySpan.textContent = 'Quantity' + (current - 1);
                    }
                });

                plusBtn.addEventListener('click', () => {
                    quantitySpan.textContent = 'Quantity' + (current + 1);
                    let current = parseInt(quantitySpan.textContent);
                });
            });
        });
    </script>
{% else %}
    <p style="color: #FF0000; font-size: 20px; margin: 200px 150px 200px 500px;">In order for the cart to appear, you need to log in</p>

{% endif %}
    

{% endblock %} 